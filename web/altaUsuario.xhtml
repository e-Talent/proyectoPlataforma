<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <ui:composition template="templates/plantillaPrincipal.xhtml">
            <ui:define name="content">
                <p:panel header="Alta de Usuario" styleClass="panel">  
                    <h:form enctype="multipart/form-data">
                        <p:growl showDetail="true"/>
                        <h:panelGrid columns="4" cellspacing="5">
                            <h:outputLabel value="DNI: " for="dniUsuario"/>
                            <p:inputText id="dniUsuario" value="#{agregarUsuario.dni}" required="true">
                                <f:validateRegex pattern="([0-9]{8})([A-Z])"/></p:inputText>
                            <h:outputLabel value="Nombre: " for="nombreUsuario"/>
                            <p:inputText id="nombreUsuario" value="#{agregarUsuario.nombre}" required="true">
                                <f:validateLength minimum="3" maximum="45" /> </p:inputText>
                            <h:outputLabel value="Apellidos: " for="apellidosUsuario"/>
                            <p:inputText id="apellidosUsuario" value="#{agregarUsuario.apellido}" required="true">
                                <f:validateLength minimum="3" maximum="45" /> </p:inputText>
                            <h:outputLabel value="Teléfono: " for="telefonoUsuario"/>
                            <p:inputText id="telefonoUsuaio" value="#{agregarUsuario.telefono}" required="true">
                                <f:validateRegex pattern="^(0034|\+34)?(\d\d\d)-? ?(\d\d)-? ?(\d)-? ?(\d)-? ?(\d\d)$"/></p:inputText>
                            <h:outputLabel value="Email " for="emailUsuario"/>
                            <p:inputText id="emailUsuario" value="#{agregarUsuario.email}" required="true">
                                <f:validateRegex pattern="^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$"/></p:inputText> 
                            <h:outputLabel value="Rol: " for="rolUsuario"/>

                            <h:selectOneMenu id="rolUsuario" value="#{agregarUsuario.rol}" required="true" label="opcion">
                                <f:selectItem itemLabel="Admin" itemValue="admin"/>
                                <f:selectItem itemLabel="Alumno" itemValue="alumno"/>
                            </h:selectOneMenu>

                            <h:outputLabel value="Usuario: " for="user"/>
                            <p:inputText id="user" value="#{agregarUsuario.usuario}" required="true">
                                <f:validateLength minimum="3" maximum="25" /></p:inputText>
                            <h:outputLabel value="Password: " for="passwordUsuario"/>
                            <p:password  id="passwordUsuario" value="#{agregarUsuario.password}" feedback="true" required="true">
                                <f:validateLength minimum="3" maximum="25" /></p:password> 
                        </h:panelGrid>
                        <br/>
                        <p:separator/>                    
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:outputLabel value="Sube una fotografía: " for="fileUpload" />
                            <p:fileUpload value="#{agregarUsuario.foto}" mode="simple" allowTypes="/(\.|\/)(gif|jpe?g|png)$/"/>          
                        </h:panelGrid>
                        <br/>
                        <p:commandButton value="Guardar Nuevo Usuario" action="#{agregarUsuario.guardarUsuario()}" ajax="false"/>
                        <p/>
                    </h:form>
                </p:panel>
            </ui:define>
        </ui:composition>
    </h:body>
</html>

